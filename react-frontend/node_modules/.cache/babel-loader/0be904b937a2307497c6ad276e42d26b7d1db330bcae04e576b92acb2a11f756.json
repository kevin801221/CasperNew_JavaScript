{"ast":null,"code":"var _jsxFileName = \"/Users/kevinluo/application/Casper_final_version/react-frontend/src/contexts/ImageContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext } from 'react';\n\n// 創建圖片上下文\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageContext = /*#__PURE__*/createContext();\n\n// 自定義 Hook 以便於在組件中使用上下文\nexport const useImageContext = () => {\n  _s();\n  return useContext(ImageContext);\n};\n\n// 上下文提供者組件\n_s(useImageContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ImageContextProvider = ({\n  children\n}) => {\n  _s2();\n  // 狀態管理\n  const [currentPage, setCurrentPage] = useState('main'); // 'main' 或 'batch'\n  const [autoRemoveBackground, setAutoRemoveBackground] = useState(true);\n  const [uploadedImages, setUploadedImages] = useState([]);\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [isFileMenuOpen, setIsFileMenuOpen] = useState(false);\n  const [isDownloadMenuOpen, setIsDownloadMenuOpen] = useState(false);\n  const [backgroundCategory, setBackgroundCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [zoomLevel, setZoomLevel] = useState(1); // 1 = 100% (正常大小)\n\n  // 模擬數據\n  const recommendedBackgrounds = ['/api/placeholder/120/90', '/api/placeholder/120/90', '/api/placeholder/120/90'];\n  const recentlyUsedBackgrounds = ['/api/placeholder/120/90', '/api/placeholder/120/90', '/api/placeholder/120/90'];\n\n  // 背景圖分類\n  const backgroundCategories = [{\n    id: 'all',\n    name: '全部'\n  }, {\n    id: 'literary',\n    name: '文青'\n  }, {\n    id: 'minimal',\n    name: '簡約'\n  }, {\n    id: 'fashion',\n    name: '時尚'\n  }, {\n    id: 'more',\n    name: '更多'\n  }];\n  const backgroundSubCategories = [{\n    id: 'home',\n    name: '居家'\n  }, {\n    id: 'kitchen',\n    name: '餐廚'\n  }, {\n    id: 'flower',\n    name: '花'\n  }];\n\n  // 切換頁面函數\n  const enterBatchMode = () => setCurrentPage('batch');\n  const exitBatchMode = () => setCurrentPage('main');\n\n  // 切換自動去背功能\n  const toggleBackgroundRemoval = () => setAutoRemoveBackground(!autoRemoveBackground);\n\n  // 切換圖片選擇狀態\n  const toggleImageSelection = id => {\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    } else {\n      setSelectedImages([...selectedImages, id]);\n    }\n  };\n\n  // 刪除選中的圖片\n  const deleteSelectedImages = () => {\n    setUploadedImages(uploadedImages.filter(img => !selectedImages.includes(img.id)));\n    setSelectedImages([]);\n  };\n\n  // 刪除單個圖片\n  const deleteImage = id => {\n    setUploadedImages(uploadedImages.filter(img => img.id !== id));\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    }\n  };\n\n  // 處理檔案上傳\n  const handleFileUpload = files => {\n    if (files && files.length > 0) {\n      const newImages = Array.from(files).filter(file => file.type.startsWith('image/')).map(file => ({\n        id: Date.now() + Math.random(),\n        url: URL.createObjectURL(file),\n        name: file.name,\n        has_bg_removed: autoRemoveBackground\n      }));\n      setUploadedImages(prev => [...prev, ...newImages]);\n\n      // 如果在主頁面上傳圖片，自動進入批量模式\n      if (currentPage === 'main') {\n        setCurrentPage('batch');\n      }\n    }\n  };\n\n  // 縮放控制\n  const zoomIn = () => setZoomLevel(prev => Math.min(prev + 0.1, 2));\n  const zoomOut = () => setZoomLevel(prev => Math.max(prev - 0.1, 0.5));\n\n  // 提供的上下文值\n  const contextValue = {\n    // 狀態\n    currentPage,\n    autoRemoveBackground,\n    uploadedImages,\n    selectedImages,\n    isFileMenuOpen,\n    isDownloadMenuOpen,\n    backgroundCategory,\n    searchQuery,\n    zoomLevel,\n    recommendedBackgrounds,\n    recentlyUsedBackgrounds,\n    backgroundCategories,\n    backgroundSubCategories,\n    // 設置函數\n    setCurrentPage,\n    setAutoRemoveBackground,\n    setUploadedImages,\n    setSelectedImages,\n    setIsFileMenuOpen,\n    setIsDownloadMenuOpen,\n    setBackgroundCategory,\n    setSearchQuery,\n    setZoomLevel,\n    // 功能函數\n    enterBatchMode,\n    exitBatchMode,\n    toggleBackgroundRemoval,\n    toggleImageSelection,\n    deleteSelectedImages,\n    deleteImage,\n    handleFileUpload,\n    zoomIn,\n    zoomOut\n  };\n  return /*#__PURE__*/_jsxDEV(ImageContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n_s2(ImageContextProvider, \"KJada5H4zWZ62tmAWniIT0XTuQ8=\");\n_c = ImageContextProvider;\nexport default ImageContext;\nvar _c;\n$RefreshReg$(_c, \"ImageContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","jsxDEV","_jsxDEV","ImageContext","useImageContext","_s","ImageContextProvider","children","_s2","currentPage","setCurrentPage","autoRemoveBackground","setAutoRemoveBackground","uploadedImages","setUploadedImages","selectedImages","setSelectedImages","isFileMenuOpen","setIsFileMenuOpen","isDownloadMenuOpen","setIsDownloadMenuOpen","backgroundCategory","setBackgroundCategory","searchQuery","setSearchQuery","zoomLevel","setZoomLevel","recommendedBackgrounds","recentlyUsedBackgrounds","backgroundCategories","id","name","backgroundSubCategories","enterBatchMode","exitBatchMode","toggleBackgroundRemoval","toggleImageSelection","includes","filter","imageId","deleteSelectedImages","img","deleteImage","handleFileUpload","files","length","newImages","Array","from","file","type","startsWith","map","Date","now","Math","random","url","URL","createObjectURL","has_bg_removed","prev","zoomIn","min","zoomOut","max","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kevinluo/application/Casper_final_version/react-frontend/src/contexts/ImageContext.js"],"sourcesContent":["import React, { createContext, useState, useContext } from 'react';\n\n// 創建圖片上下文\nconst ImageContext = createContext();\n\n// 自定義 Hook 以便於在組件中使用上下文\nexport const useImageContext = () => useContext(ImageContext);\n\n// 上下文提供者組件\nexport const ImageContextProvider = ({ children }) => {\n  // 狀態管理\n  const [currentPage, setCurrentPage] = useState('main'); // 'main' 或 'batch'\n  const [autoRemoveBackground, setAutoRemoveBackground] = useState(true);\n  const [uploadedImages, setUploadedImages] = useState([]);\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [isFileMenuOpen, setIsFileMenuOpen] = useState(false);\n  const [isDownloadMenuOpen, setIsDownloadMenuOpen] = useState(false);\n  const [backgroundCategory, setBackgroundCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [zoomLevel, setZoomLevel] = useState(1); // 1 = 100% (正常大小)\n\n  // 模擬數據\n  const recommendedBackgrounds = [\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90'\n  ];\n  \n  const recentlyUsedBackgrounds = [\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90'\n  ];\n\n  // 背景圖分類\n  const backgroundCategories = [\n    { id: 'all', name: '全部' },\n    { id: 'literary', name: '文青' },\n    { id: 'minimal', name: '簡約' },\n    { id: 'fashion', name: '時尚' },\n    { id: 'more', name: '更多' }\n  ];\n  \n  const backgroundSubCategories = [\n    { id: 'home', name: '居家' },\n    { id: 'kitchen', name: '餐廚' },\n    { id: 'flower', name: '花' }\n  ];\n\n  // 切換頁面函數\n  const enterBatchMode = () => setCurrentPage('batch');\n  const exitBatchMode = () => setCurrentPage('main');\n\n  // 切換自動去背功能\n  const toggleBackgroundRemoval = () => setAutoRemoveBackground(!autoRemoveBackground);\n\n  // 切換圖片選擇狀態\n  const toggleImageSelection = (id) => {\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    } else {\n      setSelectedImages([...selectedImages, id]);\n    }\n  };\n\n  // 刪除選中的圖片\n  const deleteSelectedImages = () => {\n    setUploadedImages(uploadedImages.filter(img => !selectedImages.includes(img.id)));\n    setSelectedImages([]);\n  };\n\n  // 刪除單個圖片\n  const deleteImage = (id) => {\n    setUploadedImages(uploadedImages.filter(img => img.id !== id));\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    }\n  };\n\n  // 處理檔案上傳\n  const handleFileUpload = (files) => {\n    if (files && files.length > 0) {\n      const newImages = Array.from(files)\n        .filter(file => file.type.startsWith('image/'))\n        .map(file => ({\n          id: Date.now() + Math.random(),\n          url: URL.createObjectURL(file),\n          name: file.name,\n          has_bg_removed: autoRemoveBackground\n        }));\n      \n      setUploadedImages(prev => [...prev, ...newImages]);\n      \n      // 如果在主頁面上傳圖片，自動進入批量模式\n      if (currentPage === 'main') {\n        setCurrentPage('batch');\n      }\n    }\n  };\n\n  // 縮放控制\n  const zoomIn = () => setZoomLevel(prev => Math.min(prev + 0.1, 2));\n  const zoomOut = () => setZoomLevel(prev => Math.max(prev - 0.1, 0.5));\n\n  // 提供的上下文值\n  const contextValue = {\n    // 狀態\n    currentPage,\n    autoRemoveBackground,\n    uploadedImages,\n    selectedImages,\n    isFileMenuOpen,\n    isDownloadMenuOpen,\n    backgroundCategory,\n    searchQuery,\n    zoomLevel,\n    recommendedBackgrounds,\n    recentlyUsedBackgrounds,\n    backgroundCategories,\n    backgroundSubCategories,\n    \n    // 設置函數\n    setCurrentPage,\n    setAutoRemoveBackground,\n    setUploadedImages,\n    setSelectedImages,\n    setIsFileMenuOpen,\n    setIsDownloadMenuOpen,\n    setBackgroundCategory,\n    setSearchQuery,\n    setZoomLevel,\n    \n    // 功能函數\n    enterBatchMode,\n    exitBatchMode,\n    toggleBackgroundRemoval,\n    toggleImageSelection,\n    deleteSelectedImages,\n    deleteImage,\n    handleFileUpload,\n    zoomIn,\n    zoomOut\n  };\n\n  return (\n    <ImageContext.Provider value={contextValue}>\n      {children}\n    </ImageContext.Provider>\n  );\n};\n\nexport default ImageContext;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}