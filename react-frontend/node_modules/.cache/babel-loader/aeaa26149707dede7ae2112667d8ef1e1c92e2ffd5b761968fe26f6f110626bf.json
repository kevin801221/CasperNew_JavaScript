{"ast":null,"code":"var _jsxFileName = \"/Users/kevinluo/application/Casper_final_version/react-frontend/src/components/BatchMode/ImageGrid.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Trash2, Scissors, Edit, X, Loader } from 'lucide-react';\nimport { useImageContext } from '../../contexts/ImageContext';\nimport { useImageEditor } from '../../hooks/useImageEditor';\nimport Button from '../common/Button';\n\n/**\n * 批量處理頁面的圖片網格組件\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ImageGrid = () => {\n  _s();\n  const {\n    uploadedImages,\n    selectedImages,\n    toggleImageSelection,\n    deleteSelectedImages,\n    deleteImage,\n    zoomLevel,\n    updateImage\n  } = useImageContext();\n  const {\n    removeBackground,\n    batchRemoveBackground\n  } = useImageEditor();\n  const [processingImages, setProcessingImages] = useState([]);\n  const [isBatchProcessing, setIsBatchProcessing] = useState(false);\n\n  // 處理單個圖片刪除\n  const handleDeleteImage = (e, id) => {\n    e.stopPropagation(); // 防止觸發選擇事件\n    deleteImage(id);\n  };\n\n  // 處理單個圖片去背\n  const handleRemoveBackground = async (e, id) => {\n    e.stopPropagation(); // 防止觸發選擇事件\n    console.log('去背圖片:', id);\n    try {\n      // 設置圖片為處理中狀態\n      setProcessingImages(prev => [...prev, id]);\n\n      // 獲取圖片數據\n      const image = uploadedImages.find(img => img.id === id);\n      if (!image) return;\n\n      // 調用去背 API\n      const processedImageUrl = await removeBackground(image.url);\n\n      // 更新圖片數據\n      updateImage(id, {\n        url: processedImageUrl,\n        has_bg_removed: true\n      });\n    } catch (error) {\n      console.error('圖片去背失敗:', error);\n      alert('圖片去背處理失敗，請稍後再試。');\n    } finally {\n      // 移除處理中狀態\n      setProcessingImages(prev => prev.filter(imgId => imgId !== id));\n    }\n  };\n\n  // 處理單個圖片編輯\n  const handleEditImage = (e, id) => {\n    e.stopPropagation(); // 防止觸發選擇事件\n    console.log('編輯圖片:', id);\n    // 這裡可以添加編輯的邏輯\n  };\n\n  // 處理批量去背\n  const handleBatchRemoveBackground = async () => {\n    if (selectedImages.length === 0 || isBatchProcessing) return;\n    try {\n      setIsBatchProcessing(true);\n\n      // 獲取選中圖片的 URL\n      const imagesToProcess = uploadedImages.filter(img => selectedImages.includes(img.id)).map(img => img.url);\n\n      // 調用批量去背 API\n      const processedImageUrls = await batchRemoveBackground(imagesToProcess);\n\n      // 更新圖片數據\n      selectedImages.forEach((id, index) => {\n        if (index < processedImageUrls.length) {\n          updateImage(id, {\n            url: processedImageUrls[index],\n            has_bg_removed: true\n          });\n        }\n      });\n      alert(`成功處理 ${processedImageUrls.length} 張圖片的背景`);\n    } catch (error) {\n      console.error('批量去背失敗:', error);\n      alert('批量去背處理失敗，請稍後再試。');\n    } finally {\n      setIsBatchProcessing(false);\n    }\n  };\n\n  // 計算圖片尺寸\n  const getImageSize = () => {\n    const baseSize = 180;\n    return {\n      width: baseSize * zoomLevel,\n      height: baseSize * 0.8 * zoomLevel\n    };\n  };\n  const {\n    width,\n    height\n  } = getImageSize();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mb-4 items-center justify-between\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: selectedImages.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: deleteSelectedImages,\n            className: \"mr-2\",\n            children: [/*#__PURE__*/_jsxDEV(Trash2, {\n              size: 16,\n              className: \"mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 17\n            }, this), \"\\u522A\\u9664 (\", selectedImages.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleBatchRemoveBackground,\n            className: \"mr-2\",\n            disabled: isBatchProcessing,\n            children: isBatchProcessing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader, {\n                size: 16,\n                className: \"mr-1 animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 21\n              }, this), \"\\u8655\\u7406\\u4E2D...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Scissors, {\n                size: 16,\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this), \"\\u6279\\u91CF\\u53BB\\u80CC (\", selectedImages.length, \")\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid gap-4\",\n      style: {\n        gridTemplateColumns: `repeat(auto-fill, minmax(${width}px, 1fr))`\n      },\n      children: uploadedImages.map(image => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `relative rounded overflow-hidden border-2 transition-all ${selectedImages.includes(image.id) ? 'border-amber-500' : 'border-transparent'}`,\n        style: {\n          height: `${height}px`\n        },\n        onClick: () => toggleImageSelection(image.id),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-2 left-2 z-10\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-5 h-5 rounded border flex items-center justify-center ${selectedImages.includes(image.id) ? 'bg-amber-500 border-amber-500' : 'border-white bg-black bg-opacity-20'}`,\n            children: selectedImages.includes(image.id) && /*#__PURE__*/_jsxDEV(X, {\n              size: 14,\n              className: \"text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-2 right-2 z-10 flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-6 h-6 rounded-full bg-black bg-opacity-50 flex items-center justify-center text-white mr-1\",\n            onClick: e => handleDeleteImage(e, image.id),\n            title: \"\\u522A\\u9664\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-6 h-6 rounded-full bg-black bg-opacity-50 flex items-center justify-center text-white mr-1\",\n            onClick: e => handleRemoveBackground(e, image.id),\n            title: \"\\u53BB\\u80CC\",\n            disabled: processingImages.includes(image.id),\n            children: processingImages.includes(image.id) ? /*#__PURE__*/_jsxDEV(Loader, {\n              size: 14,\n              className: \"animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Scissors, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-6 h-6 rounded-full bg-black bg-opacity-50 flex items-center justify-center text-white\",\n            onClick: e => handleEditImage(e, image.id),\n            title: \"\\u7DE8\\u8F2F\",\n            children: /*#__PURE__*/_jsxDEV(Edit, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: image.url,\n          alt: image.name || '上傳圖片',\n          className: \"w-full h-full object-contain\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this), image.has_bg_removed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute bottom-2 left-2 bg-amber-500 text-white text-xs px-2 py-1 rounded\",\n          children: \"\\u5DF2\\u53BB\\u80CC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 15\n        }, this)]\n      }, image.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), uploadedImages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center justify-center h-64 text-gray-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-2\",\n        children: \"\\u5C1A\\u672A\\u4E0A\\u50B3\\u5716\\u7247\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm\",\n        children: \"\\u8ACB\\u4E0A\\u50B3\\u5716\\u7247\\u6216\\u5F9E\\u4E3B\\u9801\\u9762\\u9032\\u5165\\u6279\\u91CF\\u6A21\\u5F0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageGrid, \"QSMovBrrSNARmPorec3bbwIdsSE=\", false, function () {\n  return [useImageContext, useImageEditor];\n});\n_c = ImageGrid;\nexport default ImageGrid;\nvar _c;\n$RefreshReg$(_c, \"ImageGrid\");","map":{"version":3,"names":["React","useState","Trash2","Scissors","Edit","X","Loader","useImageContext","useImageEditor","Button","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageGrid","_s","uploadedImages","selectedImages","toggleImageSelection","deleteSelectedImages","deleteImage","zoomLevel","updateImage","removeBackground","batchRemoveBackground","processingImages","setProcessingImages","isBatchProcessing","setIsBatchProcessing","handleDeleteImage","e","id","stopPropagation","handleRemoveBackground","console","log","prev","image","find","img","processedImageUrl","url","has_bg_removed","error","alert","filter","imgId","handleEditImage","handleBatchRemoveBackground","length","imagesToProcess","includes","map","processedImageUrls","forEach","index","getImageSize","baseSize","width","height","className","children","variant","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","disabled","style","gridTemplateColumns","title","src","alt","name","_c","$RefreshReg$"],"sources":["/Users/kevinluo/application/Casper_final_version/react-frontend/src/components/BatchMode/ImageGrid.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Trash2, Scissors, Edit, X, Loader } from 'lucide-react';\nimport { useImageContext } from '../../contexts/ImageContext';\nimport { useImageEditor } from '../../hooks/useImageEditor';\nimport Button from '../common/Button';\n\n/**\n * 批量處理頁面的圖片網格組件\n */\nconst ImageGrid = () => {\n  const { \n    uploadedImages, \n    selectedImages, \n    toggleImageSelection, \n    deleteSelectedImages, \n    deleteImage,\n    zoomLevel,\n    updateImage\n  } = useImageContext();\n  \n  const { removeBackground, batchRemoveBackground } = useImageEditor();\n  const [processingImages, setProcessingImages] = useState([]);\n  const [isBatchProcessing, setIsBatchProcessing] = useState(false);\n\n  // 處理單個圖片刪除\n  const handleDeleteImage = (e, id) => {\n    e.stopPropagation(); // 防止觸發選擇事件\n    deleteImage(id);\n  };\n\n  // 處理單個圖片去背\n  const handleRemoveBackground = async (e, id) => {\n    e.stopPropagation(); // 防止觸發選擇事件\n    console.log('去背圖片:', id);\n    \n    try {\n      // 設置圖片為處理中狀態\n      setProcessingImages(prev => [...prev, id]);\n      \n      // 獲取圖片數據\n      const image = uploadedImages.find(img => img.id === id);\n      if (!image) return;\n      \n      // 調用去背 API\n      const processedImageUrl = await removeBackground(image.url);\n      \n      // 更新圖片數據\n      updateImage(id, {\n        url: processedImageUrl,\n        has_bg_removed: true\n      });\n    } catch (error) {\n      console.error('圖片去背失敗:', error);\n      alert('圖片去背處理失敗，請稍後再試。');\n    } finally {\n      // 移除處理中狀態\n      setProcessingImages(prev => prev.filter(imgId => imgId !== id));\n    }\n  };\n\n  // 處理單個圖片編輯\n  const handleEditImage = (e, id) => {\n    e.stopPropagation(); // 防止觸發選擇事件\n    console.log('編輯圖片:', id);\n    // 這裡可以添加編輯的邏輯\n  };\n  \n  // 處理批量去背\n  const handleBatchRemoveBackground = async () => {\n    if (selectedImages.length === 0 || isBatchProcessing) return;\n    \n    try {\n      setIsBatchProcessing(true);\n      \n      // 獲取選中圖片的 URL\n      const imagesToProcess = uploadedImages\n        .filter(img => selectedImages.includes(img.id))\n        .map(img => img.url);\n      \n      // 調用批量去背 API\n      const processedImageUrls = await batchRemoveBackground(imagesToProcess);\n      \n      // 更新圖片數據\n      selectedImages.forEach((id, index) => {\n        if (index < processedImageUrls.length) {\n          updateImage(id, {\n            url: processedImageUrls[index],\n            has_bg_removed: true\n          });\n        }\n      });\n      \n      alert(`成功處理 ${processedImageUrls.length} 張圖片的背景`);\n    } catch (error) {\n      console.error('批量去背失敗:', error);\n      alert('批量去背處理失敗，請稍後再試。');\n    } finally {\n      setIsBatchProcessing(false);\n    }\n  };\n\n  // 計算圖片尺寸\n  const getImageSize = () => {\n    const baseSize = 180;\n    return {\n      width: baseSize * zoomLevel,\n      height: baseSize * 0.8 * zoomLevel\n    };\n  };\n\n  const { width, height } = getImageSize();\n\n  return (\n    <div className=\"p-4\">\n      {/* 頂部操作欄 */}\n      <div className=\"flex mb-4 items-center justify-between\">\n        <div className=\"flex items-center\">\n          {selectedImages.length > 0 && (\n            <>\n              <Button \n                variant=\"secondary\"\n                onClick={deleteSelectedImages}\n                className=\"mr-2\"\n              >\n                <Trash2 size={16} className=\"mr-1\" />\n                刪除 ({selectedImages.length})\n              </Button>\n              \n              <Button \n                variant=\"primary\"\n                onClick={handleBatchRemoveBackground}\n                className=\"mr-2\"\n                disabled={isBatchProcessing}\n              >\n                {isBatchProcessing ? (\n                  <>\n                    <Loader size={16} className=\"mr-1 animate-spin\" />\n                    處理中...\n                  </>\n                ) : (\n                  <>\n                    <Scissors size={16} className=\"mr-1\" />\n                    批量去背 ({selectedImages.length})\n                  </>\n                )}\n              </Button>\n            </>\n          )}\n        </div>\n      </div>\n      \n      {/* 圖片網格 */}\n      <div \n        className=\"grid gap-4\" \n        style={{ \n          gridTemplateColumns: `repeat(auto-fill, minmax(${width}px, 1fr))`,\n        }}\n      >\n        {uploadedImages.map((image) => (\n          <div \n            key={image.id} \n            className={`relative rounded overflow-hidden border-2 transition-all ${\n              selectedImages.includes(image.id) ? 'border-amber-500' : 'border-transparent'\n            }`}\n            style={{ height: `${height}px` }}\n            onClick={() => toggleImageSelection(image.id)}\n          >\n            {/* 選擇框 */}\n            <div className=\"absolute top-2 left-2 z-10\">\n              <div \n                className={`w-5 h-5 rounded border flex items-center justify-center ${\n                  selectedImages.includes(image.id) \n                    ? 'bg-amber-500 border-amber-500' \n                    : 'border-white bg-black bg-opacity-20'\n                }`}\n              >\n                {selectedImages.includes(image.id) && (\n                  <X size={14} className=\"text-white\" />\n                )}\n              </div>\n            </div>\n            \n            {/* 功能按鈕 */}\n            <div className=\"absolute top-2 right-2 z-10 flex\">\n              <button \n                className=\"w-6 h-6 rounded-full bg-black bg-opacity-50 flex items-center justify-center text-white mr-1\"\n                onClick={(e) => handleDeleteImage(e, image.id)}\n                title=\"刪除\"\n              >\n                <Trash2 size={14} />\n              </button>\n              <button \n                className=\"w-6 h-6 rounded-full bg-black bg-opacity-50 flex items-center justify-center text-white mr-1\"\n                onClick={(e) => handleRemoveBackground(e, image.id)}\n                title=\"去背\"\n                disabled={processingImages.includes(image.id)}\n              >\n                {processingImages.includes(image.id) ? (\n                  <Loader size={14} className=\"animate-spin\" />\n                ) : (\n                  <Scissors size={14} />\n                )}\n              </button>\n              <button \n                className=\"w-6 h-6 rounded-full bg-black bg-opacity-50 flex items-center justify-center text-white\"\n                onClick={(e) => handleEditImage(e, image.id)}\n                title=\"編輯\"\n              >\n                <Edit size={14} />\n              </button>\n            </div>\n            \n            {/* 圖片 */}\n            <img \n              src={image.url} \n              alt={image.name || '上傳圖片'} \n              className=\"w-full h-full object-contain\"\n            />\n            \n            {/* 去背標記 */}\n            {image.has_bg_removed && (\n              <div className=\"absolute bottom-2 left-2 bg-amber-500 text-white text-xs px-2 py-1 rounded\">\n                已去背\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n      \n      {/* 空狀態 */}\n      {uploadedImages.length === 0 && (\n        <div className=\"flex flex-col items-center justify-center h-64 text-gray-500\">\n          <p className=\"mb-2\">尚未上傳圖片</p>\n          <p className=\"text-sm\">請上傳圖片或從主頁面進入批量模式</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ImageGrid;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}