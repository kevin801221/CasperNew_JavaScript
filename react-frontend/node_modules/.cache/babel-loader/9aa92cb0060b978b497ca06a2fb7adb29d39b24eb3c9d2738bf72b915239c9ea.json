{"ast":null,"code":"var _jsxFileName = \"/Users/kevinluo/application/Casper_final_version/react-frontend/src/contexts/ImageContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useRef } from 'react';\n\n// 創建圖片上下文\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageContext = /*#__PURE__*/createContext();\n\n// 自定義 Hook 以便於在組件中使用上下文\nexport const useImageContext = () => {\n  _s();\n  return useContext(ImageContext);\n};\n\n// 上下文提供者組件\n_s(useImageContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const ImageContextProvider = ({\n  children\n}) => {\n  _s2();\n  // 頁面狀態管理\n  // 'main': 主頁面\n  // 'batch': 批量處理頁面\n  // 'customBg': 自定義背景頁面 (AI 商品圖-2-2)\n  // 'bgResults': 背景生成結果頁面 (AI 商品圖-2-3)\n  // 'sizeAdjust': 尺寸調整頁面 (AI 商品圖-2-4)\n  // 'singleEditor': 單張編輯模式 (AI 商品圖-3)\n  // 'singleEditorResult': 單張編輯背景生成結果頁面\n  const [currentPage, setCurrentPage] = useState('main');\n\n  // 基本設置\n  const [autoRemoveBackground, setAutoRemoveBackground] = useState(true);\n  const [uploadedImages, setUploadedImages] = useState([]);\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [isFileMenuOpen, setIsFileMenuOpen] = useState(false);\n  const [isDownloadMenuOpen, setIsDownloadMenuOpen] = useState(false);\n  const [backgroundCategory, setBackgroundCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [zoomLevel, setZoomLevel] = useState(1); // 1 = 100% (正常大小)\n\n  // 自定義背景頁面狀態\n  const [bgDesignMode, setBgDesignMode] = useState('recommend'); // 'recommend' 或 'custom'\n  const [prompt, setPrompt] = useState('');\n  const [negativePrompt, setNegativePrompt] = useState('');\n  const [referenceImages, setReferenceImages] = useState([]);\n\n  // 背景生成結果頁面狀態\n  const [generatedBackgrounds, setGeneratedBackgrounds] = useState([]);\n  const [selectedBackground, setSelectedBackground] = useState(null);\n\n  // 尺寸調整頁面狀態\n  const [canvasWidth, setCanvasWidth] = useState(1200);\n  const [canvasHeight, setCanvasHeight] = useState(1200);\n  const [aspectRatio, setAspectRatio] = useState('custom'); // 'custom', '1:1', '4:3', '16:9'\n  const [margin, setMargin] = useState(20); // 圖片與畫布的邊距\n\n  // 單張編輯模式狀態\n  const [currentMode, setCurrentMode] = useState('main'); // 'main' 或 'result'\n  const [activeTool, setActiveTool] = useState(''); // 'canvas', 'background', 'element', 'text', 'ruler', 'upload'\n  const [zoom, setZoom] = useState(50); // 縮放百分比\n  const [productImageUrl, setProductImageUrl] = useState('/api/placeholder/600/600?text=商品圖');\n  const [bgPrompt, setBgPrompt] = useState('');\n  const [bgNegativePrompt, setBgNegativePrompt] = useState('');\n  const bgReferenceInputRef = useRef(null);\n\n  // 標尺設置\n  const [rulerStyle, setRulerStyle] = useState(0);\n  const [rulerTab, setRulerTab] = useState('數值');\n  const [rulerValue, setRulerValue] = useState(50);\n  const [rulerUnit, setRulerUnit] = useState('cm(公分)');\n  const [rulerPosition, setRulerPosition] = useState('線條中間');\n  const [rulerText, setRulerText] = useState('');\n\n  // 文字設置\n  const [letterSpacing, setLetterSpacing] = useState(0);\n  const [lineHeight, setLineHeight] = useState(1.5);\n\n  // 生成結果\n  const [generatedResults, setGeneratedResults] = useState(['/api/placeholder/300/300?text=背景1', '/api/placeholder/300/300?text=背景2', '/api/placeholder/300/300?text=背景3', '/api/placeholder/300/300?text=背景4']);\n\n  // 模擬數據\n  const recommendedBackgrounds = ['/api/placeholder/120/90', '/api/placeholder/120/90', '/api/placeholder/120/90'];\n  const recentlyUsedBackgrounds = ['/api/placeholder/120/90', '/api/placeholder/120/90', '/api/placeholder/120/90'];\n\n  // 背景圖分類\n  const backgroundCategories = [{\n    id: 'all',\n    name: '全部'\n  }, {\n    id: 'literary',\n    name: '文青'\n  }, {\n    id: 'minimal',\n    name: '簡約'\n  }, {\n    id: 'fashion',\n    name: '時尚'\n  }, {\n    id: 'more',\n    name: '更多'\n  }];\n  const backgroundSubCategories = [{\n    id: 'home',\n    name: '居家'\n  }, {\n    id: 'kitchen',\n    name: '餐廚'\n  }, {\n    id: 'flower',\n    name: '花'\n  }];\n\n  // 頁面導航函數\n  const enterBatchMode = () => setCurrentPage('batch');\n  const exitBatchMode = () => setCurrentPage('main');\n  const enterCustomBgMode = () => setCurrentPage('customBg');\n  const enterBgResultsMode = () => setCurrentPage('bgResults');\n  const enterSizeAdjustMode = () => setCurrentPage('sizeAdjust');\n  const enterSingleEditorMode = () => setCurrentPage('singleEditor');\n  const enterSingleEditorResultMode = () => {\n    setCurrentPage('singleEditorResult');\n    setCurrentMode('result');\n  };\n  const goToMainPage = () => setCurrentPage('main');\n  const goBack = () => {\n    // 根據當前頁面決定返回哪個頁面\n    switch (currentPage) {\n      case 'customBg':\n        setCurrentPage('batch');\n        break;\n      case 'bgResults':\n        setCurrentPage('customBg');\n        break;\n      case 'sizeAdjust':\n        setCurrentPage('bgResults');\n        break;\n      case 'singleEditorResult':\n        setCurrentPage('singleEditor');\n        setCurrentMode('main');\n        break;\n      default:\n        setCurrentPage('main');\n    }\n  };\n\n  // 切換自動去背功能\n  const toggleBackgroundRemoval = () => setAutoRemoveBackground(!autoRemoveBackground);\n\n  // 切換圖片選擇狀態\n  const toggleImageSelection = id => {\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    } else {\n      setSelectedImages([...selectedImages, id]);\n    }\n  };\n\n  // 刪除選中的圖片\n  const deleteSelectedImages = () => {\n    setUploadedImages(uploadedImages.filter(img => !selectedImages.includes(img.id)));\n    setSelectedImages([]);\n  };\n\n  // 刪除單個圖片\n  const deleteImage = id => {\n    setUploadedImages(uploadedImages.filter(img => img.id !== id));\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    }\n  };\n\n  // 處理檔案上傳\n  const handleFileUpload = files => {\n    if (files && files.length > 0) {\n      const newImages = Array.from(files).filter(file => file.type.startsWith('image/')).map(file => ({\n        id: Date.now() + Math.random(),\n        url: URL.createObjectURL(file),\n        name: file.name,\n        has_bg_removed: autoRemoveBackground\n      }));\n      setUploadedImages(prev => [...prev, ...newImages]);\n\n      // 如果在主頁面上傳圖片，自動進入批量模式\n      if (currentPage === 'main') {\n        setCurrentPage('batch');\n      }\n    }\n  };\n\n  // 縮放控制\n  const zoomIn = () => setZoomLevel(prev => Math.min(prev + 0.1, 2));\n  const zoomOut = () => setZoomLevel(prev => Math.max(prev - 0.1, 0.5));\n\n  // 生成背景函數\n  const generateBackgrounds = () => {\n    console.log('生成背景，提示詞:', prompt);\n    console.log('負面提示詞:', negativePrompt);\n    console.log('參考圖片數量:', referenceImages.length);\n\n    // 模擬生成背景的過程\n    // 在實際應用中，這裡會調用 API 生成背景\n    const mockGeneratedBackgrounds = ['/api/placeholder/300/300?text=背景1', '/api/placeholder/300/300?text=背景2', '/api/placeholder/300/300?text=背景3', '/api/placeholder/300/300?text=背景4'];\n    setGeneratedBackgrounds(mockGeneratedBackgrounds);\n    setSelectedBackground(mockGeneratedBackgrounds[0]); // 默認選中第一個\n\n    // 導航到背景生成結果頁面\n    enterBgResultsMode();\n  };\n\n  // 單張編輯模式生成背景函數\n  const handleGenerateBackground = () => {\n    console.log('生成背景，提示詞:', bgPrompt);\n    console.log('負面提示詞:', bgNegativePrompt);\n    console.log('參考圖片數量:', referenceImages.length);\n\n    // 模擬生成背景的過程\n    const mockResults = ['/api/placeholder/300/300?text=背景1', '/api/placeholder/300/300?text=背景2', '/api/placeholder/300/300?text=背景3', '/api/placeholder/300/300?text=背景4'];\n    setGeneratedResults(mockResults);\n    enterSingleEditorResultMode();\n  };\n\n  // 生成更多背景選項\n  const generateMoreBackgrounds = () => {\n    console.log('生成更多背景選項');\n\n    // 模擬生成更多背景\n    const mockMoreBackgrounds = ['/api/placeholder/300/300?text=新背景1', '/api/placeholder/300/300?text=新背景2', '/api/placeholder/300/300?text=新背景3', '/api/placeholder/300/300?text=新背景4'];\n    setGeneratedBackgrounds(mockMoreBackgrounds);\n    setSelectedBackground(mockMoreBackgrounds[0]);\n  };\n\n  // 單張編輯模式生成更多背景\n  const handleGenerateMoreBackgrounds = () => {\n    console.log('生成更多背景選項');\n\n    // 模擬生成更多背景\n    const mockMoreResults = ['/api/placeholder/300/300?text=新背景5', '/api/placeholder/300/300?text=新背景6', '/api/placeholder/300/300?text=新背景7', '/api/placeholder/300/300?text=新背景8'];\n    setGeneratedResults(mockMoreResults);\n  };\n\n  // 單張編輯模式重新生成背景\n  const handleRegenerateBackgrounds = () => {\n    console.log('重新生成背景');\n\n    // 模擬重新生成背景\n    const mockRegeneratedResults = ['/api/placeholder/300/300?text=重新背景1', '/api/placeholder/300/300?text=重新背景2', '/api/placeholder/300/300?text=重新背景3', '/api/placeholder/300/300?text=重新背景4'];\n    setGeneratedResults(mockRegeneratedResults);\n  };\n\n  // 應用選定的背景到所有選中的圖片\n  const applyBackgroundToImages = () => {\n    if (!selectedBackground) return;\n    console.log('應用背景到圖片');\n\n    // 在實際應用中，這裡會調用 API 將背景應用到圖片\n    // 現在只是模擬這個過程\n\n    // 返回批量處理頁面\n    setCurrentPage('batch');\n  };\n\n  // 更新畫布尺寸並保持比例\n  const updateCanvasSize = (width, height, keepRatio = false) => {\n    if (keepRatio) {\n      if (width) {\n        const newHeight = aspectRatio === '1:1' ? width : aspectRatio === '4:3' ? Math.round(width * 3 / 4) : aspectRatio === '16:9' ? Math.round(width * 9 / 16) : height;\n        setCanvasWidth(width);\n        setCanvasHeight(newHeight);\n      } else if (height) {\n        const newWidth = aspectRatio === '1:1' ? height : aspectRatio === '4:3' ? Math.round(height * 4 / 3) : aspectRatio === '16:9' ? Math.round(height * 16 / 9) : width;\n        setCanvasHeight(height);\n        setCanvasWidth(newWidth);\n      }\n    } else {\n      if (width) setCanvasWidth(width);\n      if (height) setCanvasHeight(height);\n    }\n  };\n\n  // 設置畫布比例\n  const setCanvasAspectRatio = ratio => {\n    setAspectRatio(ratio);\n\n    // 根據新比例調整畫布尺寸\n    if (ratio === 'custom') return; // 自定義比例不自動調整\n\n    if (ratio === '1:1') {\n      // 使用當前寬度，高度設為相等\n      setCanvasHeight(canvasWidth);\n    } else if (ratio === '4:3') {\n      // 使用當前寬度，計算對應的高度\n      setCanvasHeight(Math.round(canvasWidth * 3 / 4));\n    } else if (ratio === '16:9') {\n      // 使用當前寬度，計算對應的高度\n      setCanvasHeight(Math.round(canvasWidth * 9 / 16));\n    }\n  };\n\n  // 單張編輯模式功能函數\n  // 處理工具點擊\n  const handleToolClick = tool => {\n    setActiveTool(tool === activeTool ? '' : tool);\n  };\n\n  // 處理縮放變更\n  const handleZoomChange = newZoom => {\n    setZoom(Math.max(10, Math.min(100, newZoom)));\n  };\n\n  // 處理參考圖片上傳\n  const handleReferenceImageUpload = e => {\n    if (e.target.files && e.target.files.length > 0) {\n      const file = e.target.files[0];\n      const newImage = {\n        id: Date.now(),\n        url: URL.createObjectURL(file),\n        name: file.name\n      };\n      setReferenceImages(prev => [...prev, newImage]);\n    }\n  };\n\n  // 移除參考圖片\n  const removeReferenceImage = id => {\n    setReferenceImages(prev => prev.filter(img => img.id !== id));\n  };\n\n  // 選擇生成的背景\n  const handleSelectGeneratedBackground = index => {\n    console.log('選擇背景:', index);\n    // 在實際應用中，這裡會應用選中的背景到圖片\n  };\n\n  // 旋轉圖片\n  const handleRotate = degrees => {\n    console.log('旋轉圖片:', degrees);\n    // 在實際應用中，這裡會旋轉圖片\n  };\n\n  // 翻轉圖片\n  const handleFlip = direction => {\n    console.log('翻轉圖片:', direction);\n    // 在實際應用中，這裡會翻轉圖片\n  };\n\n  // 刪除圖片\n  const handleDelete = () => {\n    console.log('刪除圖片');\n    // 在實際應用中，這裡會刪除圖片\n  };\n\n  // 下載圖片\n  const handleDownload = () => {\n    console.log('下載圖片');\n    // 在實際應用中，這裡會下載圖片\n  };\n\n  // 提供的上下文值\n  const contextValue = {\n    // 基本狀態\n    currentPage,\n    autoRemoveBackground,\n    uploadedImages,\n    selectedImages,\n    isFileMenuOpen,\n    isDownloadMenuOpen,\n    backgroundCategory,\n    searchQuery,\n    zoomLevel,\n    recommendedBackgrounds,\n    recentlyUsedBackgrounds,\n    backgroundCategories,\n    backgroundSubCategories,\n    // 自定義背景頁面狀態\n    bgDesignMode,\n    prompt,\n    negativePrompt,\n    referenceImages,\n    // 背景生成結果頁面狀態\n    generatedBackgrounds,\n    selectedBackground,\n    // 尺寸調整頁面狀態\n    canvasWidth,\n    canvasHeight,\n    aspectRatio,\n    margin,\n    // 單張編輯模式狀態\n    currentMode,\n    activeTool,\n    zoom,\n    productImageUrl,\n    bgPrompt,\n    bgNegativePrompt,\n    bgReferenceInputRef,\n    rulerStyle,\n    rulerTab,\n    rulerValue,\n    rulerUnit,\n    rulerPosition,\n    rulerText,\n    letterSpacing,\n    lineHeight,\n    generatedResults,\n    // 設置函數\n    setCurrentPage,\n    setAutoRemoveBackground,\n    setUploadedImages,\n    setSelectedImages,\n    setIsFileMenuOpen,\n    setIsDownloadMenuOpen,\n    setBackgroundCategory,\n    setSearchQuery,\n    setZoomLevel,\n    setBgDesignMode,\n    setPrompt,\n    setNegativePrompt,\n    setReferenceImages,\n    setGeneratedBackgrounds,\n    setSelectedBackground,\n    setCanvasWidth,\n    setCanvasHeight,\n    setAspectRatio,\n    setMargin,\n    setCurrentMode,\n    setActiveTool,\n    setZoom,\n    setProductImageUrl,\n    setBgPrompt,\n    setBgNegativePrompt,\n    setRulerStyle,\n    setRulerTab,\n    setRulerValue,\n    setRulerUnit,\n    setRulerPosition,\n    setRulerText,\n    setLetterSpacing,\n    setLineHeight,\n    setGeneratedResults,\n    // 頁面導航函數\n    enterBatchMode,\n    exitBatchMode,\n    enterCustomBgMode,\n    enterBgResultsMode,\n    enterSizeAdjustMode,\n    enterSingleEditorMode,\n    enterSingleEditorResultMode,\n    goToMainPage,\n    goBack,\n    // 功能函數\n    toggleBackgroundRemoval,\n    toggleImageSelection,\n    deleteSelectedImages,\n    deleteImage,\n    handleFileUpload,\n    zoomIn,\n    zoomOut,\n    generateBackgrounds,\n    generateMoreBackgrounds,\n    applyBackgroundToImages,\n    updateCanvasSize,\n    setCanvasAspectRatio,\n    // 單張編輯模式功能函數\n    handleToolClick,\n    handleZoomChange,\n    handleReferenceImageUpload,\n    removeReferenceImage,\n    handleGenerateBackground,\n    handleGenerateMoreBackgrounds,\n    handleRegenerateBackgrounds,\n    handleSelectGeneratedBackground,\n    handleRotate,\n    handleFlip,\n    handleDelete,\n    handleDownload\n  };\n  return /*#__PURE__*/_jsxDEV(ImageContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 518,\n    columnNumber: 5\n  }, this);\n};\n_s2(ImageContextProvider, \"Ap/RlMQ2kBAfMrL0N4GKwjaRs5c=\");\n_c = ImageContextProvider;\nexport default ImageContext;\nvar _c;\n$RefreshReg$(_c, \"ImageContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useRef","jsxDEV","_jsxDEV","ImageContext","useImageContext","_s","ImageContextProvider","children","_s2","currentPage","setCurrentPage","autoRemoveBackground","setAutoRemoveBackground","uploadedImages","setUploadedImages","selectedImages","setSelectedImages","isFileMenuOpen","setIsFileMenuOpen","isDownloadMenuOpen","setIsDownloadMenuOpen","backgroundCategory","setBackgroundCategory","searchQuery","setSearchQuery","zoomLevel","setZoomLevel","bgDesignMode","setBgDesignMode","prompt","setPrompt","negativePrompt","setNegativePrompt","referenceImages","setReferenceImages","generatedBackgrounds","setGeneratedBackgrounds","selectedBackground","setSelectedBackground","canvasWidth","setCanvasWidth","canvasHeight","setCanvasHeight","aspectRatio","setAspectRatio","margin","setMargin","currentMode","setCurrentMode","activeTool","setActiveTool","zoom","setZoom","productImageUrl","setProductImageUrl","bgPrompt","setBgPrompt","bgNegativePrompt","setBgNegativePrompt","bgReferenceInputRef","rulerStyle","setRulerStyle","rulerTab","setRulerTab","rulerValue","setRulerValue","rulerUnit","setRulerUnit","rulerPosition","setRulerPosition","rulerText","setRulerText","letterSpacing","setLetterSpacing","lineHeight","setLineHeight","generatedResults","setGeneratedResults","recommendedBackgrounds","recentlyUsedBackgrounds","backgroundCategories","id","name","backgroundSubCategories","enterBatchMode","exitBatchMode","enterCustomBgMode","enterBgResultsMode","enterSizeAdjustMode","enterSingleEditorMode","enterSingleEditorResultMode","goToMainPage","goBack","toggleBackgroundRemoval","toggleImageSelection","includes","filter","imageId","deleteSelectedImages","img","deleteImage","handleFileUpload","files","length","newImages","Array","from","file","type","startsWith","map","Date","now","Math","random","url","URL","createObjectURL","has_bg_removed","prev","zoomIn","min","zoomOut","max","generateBackgrounds","console","log","mockGeneratedBackgrounds","handleGenerateBackground","mockResults","generateMoreBackgrounds","mockMoreBackgrounds","handleGenerateMoreBackgrounds","mockMoreResults","handleRegenerateBackgrounds","mockRegeneratedResults","applyBackgroundToImages","updateCanvasSize","width","height","keepRatio","newHeight","round","newWidth","setCanvasAspectRatio","ratio","handleToolClick","tool","handleZoomChange","newZoom","handleReferenceImageUpload","e","target","newImage","removeReferenceImage","handleSelectGeneratedBackground","index","handleRotate","degrees","handleFlip","direction","handleDelete","handleDownload","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kevinluo/application/Casper_final_version/react-frontend/src/contexts/ImageContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useRef } from 'react';\n\n// 創建圖片上下文\nconst ImageContext = createContext();\n\n// 自定義 Hook 以便於在組件中使用上下文\nexport const useImageContext = () => useContext(ImageContext);\n\n// 上下文提供者組件\nexport const ImageContextProvider = ({ children }) => {\n  // 頁面狀態管理\n  // 'main': 主頁面\n  // 'batch': 批量處理頁面\n  // 'customBg': 自定義背景頁面 (AI 商品圖-2-2)\n  // 'bgResults': 背景生成結果頁面 (AI 商品圖-2-3)\n  // 'sizeAdjust': 尺寸調整頁面 (AI 商品圖-2-4)\n  // 'singleEditor': 單張編輯模式 (AI 商品圖-3)\n  // 'singleEditorResult': 單張編輯背景生成結果頁面\n  const [currentPage, setCurrentPage] = useState('main');\n  \n  // 基本設置\n  const [autoRemoveBackground, setAutoRemoveBackground] = useState(true);\n  const [uploadedImages, setUploadedImages] = useState([]);\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [isFileMenuOpen, setIsFileMenuOpen] = useState(false);\n  const [isDownloadMenuOpen, setIsDownloadMenuOpen] = useState(false);\n  const [backgroundCategory, setBackgroundCategory] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [zoomLevel, setZoomLevel] = useState(1); // 1 = 100% (正常大小)\n  \n  // 自定義背景頁面狀態\n  const [bgDesignMode, setBgDesignMode] = useState('recommend'); // 'recommend' 或 'custom'\n  const [prompt, setPrompt] = useState('');\n  const [negativePrompt, setNegativePrompt] = useState('');\n  const [referenceImages, setReferenceImages] = useState([]);\n  \n  // 背景生成結果頁面狀態\n  const [generatedBackgrounds, setGeneratedBackgrounds] = useState([]);\n  const [selectedBackground, setSelectedBackground] = useState(null);\n  \n  // 尺寸調整頁面狀態\n  const [canvasWidth, setCanvasWidth] = useState(1200);\n  const [canvasHeight, setCanvasHeight] = useState(1200);\n  const [aspectRatio, setAspectRatio] = useState('custom'); // 'custom', '1:1', '4:3', '16:9'\n  const [margin, setMargin] = useState(20); // 圖片與畫布的邊距\n  \n  // 單張編輯模式狀態\n  const [currentMode, setCurrentMode] = useState('main'); // 'main' 或 'result'\n  const [activeTool, setActiveTool] = useState(''); // 'canvas', 'background', 'element', 'text', 'ruler', 'upload'\n  const [zoom, setZoom] = useState(50); // 縮放百分比\n  const [productImageUrl, setProductImageUrl] = useState('/api/placeholder/600/600?text=商品圖');\n  const [bgPrompt, setBgPrompt] = useState('');\n  const [bgNegativePrompt, setBgNegativePrompt] = useState('');\n  const bgReferenceInputRef = useRef(null);\n  \n  // 標尺設置\n  const [rulerStyle, setRulerStyle] = useState(0);\n  const [rulerTab, setRulerTab] = useState('數值');\n  const [rulerValue, setRulerValue] = useState(50);\n  const [rulerUnit, setRulerUnit] = useState('cm(公分)');\n  const [rulerPosition, setRulerPosition] = useState('線條中間');\n  const [rulerText, setRulerText] = useState('');\n  \n  // 文字設置\n  const [letterSpacing, setLetterSpacing] = useState(0);\n  const [lineHeight, setLineHeight] = useState(1.5);\n  \n  // 生成結果\n  const [generatedResults, setGeneratedResults] = useState([\n    '/api/placeholder/300/300?text=背景1',\n    '/api/placeholder/300/300?text=背景2',\n    '/api/placeholder/300/300?text=背景3',\n    '/api/placeholder/300/300?text=背景4'\n  ]);\n\n  // 模擬數據\n  const recommendedBackgrounds = [\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90'\n  ];\n  \n  const recentlyUsedBackgrounds = [\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90',\n    '/api/placeholder/120/90'\n  ];\n\n  // 背景圖分類\n  const backgroundCategories = [\n    { id: 'all', name: '全部' },\n    { id: 'literary', name: '文青' },\n    { id: 'minimal', name: '簡約' },\n    { id: 'fashion', name: '時尚' },\n    { id: 'more', name: '更多' }\n  ];\n  \n  const backgroundSubCategories = [\n    { id: 'home', name: '居家' },\n    { id: 'kitchen', name: '餐廚' },\n    { id: 'flower', name: '花' }\n  ];\n\n  // 頁面導航函數\n  const enterBatchMode = () => setCurrentPage('batch');\n  const exitBatchMode = () => setCurrentPage('main');\n  const enterCustomBgMode = () => setCurrentPage('customBg');\n  const enterBgResultsMode = () => setCurrentPage('bgResults');\n  const enterSizeAdjustMode = () => setCurrentPage('sizeAdjust');\n  const enterSingleEditorMode = () => setCurrentPage('singleEditor');\n  const enterSingleEditorResultMode = () => {\n    setCurrentPage('singleEditorResult');\n    setCurrentMode('result');\n  };\n  const goToMainPage = () => setCurrentPage('main');\n  const goBack = () => {\n    // 根據當前頁面決定返回哪個頁面\n    switch (currentPage) {\n      case 'customBg':\n        setCurrentPage('batch');\n        break;\n      case 'bgResults':\n        setCurrentPage('customBg');\n        break;\n      case 'sizeAdjust':\n        setCurrentPage('bgResults');\n        break;\n      case 'singleEditorResult':\n        setCurrentPage('singleEditor');\n        setCurrentMode('main');\n        break;\n      default:\n        setCurrentPage('main');\n    }\n  };\n\n  // 切換自動去背功能\n  const toggleBackgroundRemoval = () => setAutoRemoveBackground(!autoRemoveBackground);\n\n  // 切換圖片選擇狀態\n  const toggleImageSelection = (id) => {\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    } else {\n      setSelectedImages([...selectedImages, id]);\n    }\n  };\n\n  // 刪除選中的圖片\n  const deleteSelectedImages = () => {\n    setUploadedImages(uploadedImages.filter(img => !selectedImages.includes(img.id)));\n    setSelectedImages([]);\n  };\n\n  // 刪除單個圖片\n  const deleteImage = (id) => {\n    setUploadedImages(uploadedImages.filter(img => img.id !== id));\n    if (selectedImages.includes(id)) {\n      setSelectedImages(selectedImages.filter(imageId => imageId !== id));\n    }\n  };\n\n  // 處理檔案上傳\n  const handleFileUpload = (files) => {\n    if (files && files.length > 0) {\n      const newImages = Array.from(files)\n        .filter(file => file.type.startsWith('image/'))\n        .map(file => ({\n          id: Date.now() + Math.random(),\n          url: URL.createObjectURL(file),\n          name: file.name,\n          has_bg_removed: autoRemoveBackground\n        }));\n      \n      setUploadedImages(prev => [...prev, ...newImages]);\n      \n      // 如果在主頁面上傳圖片，自動進入批量模式\n      if (currentPage === 'main') {\n        setCurrentPage('batch');\n      }\n    }\n  };\n\n  // 縮放控制\n  const zoomIn = () => setZoomLevel(prev => Math.min(prev + 0.1, 2));\n  const zoomOut = () => setZoomLevel(prev => Math.max(prev - 0.1, 0.5));\n\n  // 生成背景函數\n  const generateBackgrounds = () => {\n    console.log('生成背景，提示詞:', prompt);\n    console.log('負面提示詞:', negativePrompt);\n    console.log('參考圖片數量:', referenceImages.length);\n    \n    // 模擬生成背景的過程\n    // 在實際應用中，這裡會調用 API 生成背景\n    const mockGeneratedBackgrounds = [\n      '/api/placeholder/300/300?text=背景1',\n      '/api/placeholder/300/300?text=背景2',\n      '/api/placeholder/300/300?text=背景3',\n      '/api/placeholder/300/300?text=背景4'\n    ];\n    \n    setGeneratedBackgrounds(mockGeneratedBackgrounds);\n    setSelectedBackground(mockGeneratedBackgrounds[0]); // 默認選中第一個\n    \n    // 導航到背景生成結果頁面\n    enterBgResultsMode();\n  };\n  \n  // 單張編輯模式生成背景函數\n  const handleGenerateBackground = () => {\n    console.log('生成背景，提示詞:', bgPrompt);\n    console.log('負面提示詞:', bgNegativePrompt);\n    console.log('參考圖片數量:', referenceImages.length);\n    \n    // 模擬生成背景的過程\n    const mockResults = [\n      '/api/placeholder/300/300?text=背景1',\n      '/api/placeholder/300/300?text=背景2',\n      '/api/placeholder/300/300?text=背景3',\n      '/api/placeholder/300/300?text=背景4'\n    ];\n    \n    setGeneratedResults(mockResults);\n    enterSingleEditorResultMode();\n  };\n  \n  // 生成更多背景選項\n  const generateMoreBackgrounds = () => {\n    console.log('生成更多背景選項');\n    \n    // 模擬生成更多背景\n    const mockMoreBackgrounds = [\n      '/api/placeholder/300/300?text=新背景1',\n      '/api/placeholder/300/300?text=新背景2',\n      '/api/placeholder/300/300?text=新背景3',\n      '/api/placeholder/300/300?text=新背景4'\n    ];\n    \n    setGeneratedBackgrounds(mockMoreBackgrounds);\n    setSelectedBackground(mockMoreBackgrounds[0]);\n  };\n  \n  // 單張編輯模式生成更多背景\n  const handleGenerateMoreBackgrounds = () => {\n    console.log('生成更多背景選項');\n    \n    // 模擬生成更多背景\n    const mockMoreResults = [\n      '/api/placeholder/300/300?text=新背景5',\n      '/api/placeholder/300/300?text=新背景6',\n      '/api/placeholder/300/300?text=新背景7',\n      '/api/placeholder/300/300?text=新背景8'\n    ];\n    \n    setGeneratedResults(mockMoreResults);\n  };\n  \n  // 單張編輯模式重新生成背景\n  const handleRegenerateBackgrounds = () => {\n    console.log('重新生成背景');\n    \n    // 模擬重新生成背景\n    const mockRegeneratedResults = [\n      '/api/placeholder/300/300?text=重新背景1',\n      '/api/placeholder/300/300?text=重新背景2',\n      '/api/placeholder/300/300?text=重新背景3',\n      '/api/placeholder/300/300?text=重新背景4'\n    ];\n    \n    setGeneratedResults(mockRegeneratedResults);\n  };\n  \n  // 應用選定的背景到所有選中的圖片\n  const applyBackgroundToImages = () => {\n    if (!selectedBackground) return;\n    \n    console.log('應用背景到圖片');\n    \n    // 在實際應用中，這裡會調用 API 將背景應用到圖片\n    // 現在只是模擬這個過程\n    \n    // 返回批量處理頁面\n    setCurrentPage('batch');\n  };\n  \n  // 更新畫布尺寸並保持比例\n  const updateCanvasSize = (width, height, keepRatio = false) => {\n    if (keepRatio) {\n      if (width) {\n        const newHeight = aspectRatio === '1:1' ? width :\n                         aspectRatio === '4:3' ? Math.round(width * 3 / 4) :\n                         aspectRatio === '16:9' ? Math.round(width * 9 / 16) :\n                         height;\n        setCanvasWidth(width);\n        setCanvasHeight(newHeight);\n      } else if (height) {\n        const newWidth = aspectRatio === '1:1' ? height :\n                        aspectRatio === '4:3' ? Math.round(height * 4 / 3) :\n                        aspectRatio === '16:9' ? Math.round(height * 16 / 9) :\n                        width;\n        setCanvasHeight(height);\n        setCanvasWidth(newWidth);\n      }\n    } else {\n      if (width) setCanvasWidth(width);\n      if (height) setCanvasHeight(height);\n    }\n  };\n  \n  // 設置畫布比例\n  const setCanvasAspectRatio = (ratio) => {\n    setAspectRatio(ratio);\n    \n    // 根據新比例調整畫布尺寸\n    if (ratio === 'custom') return; // 自定義比例不自動調整\n    \n    if (ratio === '1:1') {\n      // 使用當前寬度，高度設為相等\n      setCanvasHeight(canvasWidth);\n    } else if (ratio === '4:3') {\n      // 使用當前寬度，計算對應的高度\n      setCanvasHeight(Math.round(canvasWidth * 3 / 4));\n    } else if (ratio === '16:9') {\n      // 使用當前寬度，計算對應的高度\n      setCanvasHeight(Math.round(canvasWidth * 9 / 16));\n    }\n  };\n\n  // 單張編輯模式功能函數\n  // 處理工具點擊\n  const handleToolClick = (tool) => {\n    setActiveTool(tool === activeTool ? '' : tool);\n  };\n  \n  // 處理縮放變更\n  const handleZoomChange = (newZoom) => {\n    setZoom(Math.max(10, Math.min(100, newZoom)));\n  };\n  \n  // 處理參考圖片上傳\n  const handleReferenceImageUpload = (e) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const file = e.target.files[0];\n      const newImage = {\n        id: Date.now(),\n        url: URL.createObjectURL(file),\n        name: file.name\n      };\n      \n      setReferenceImages(prev => [...prev, newImage]);\n    }\n  };\n  \n  // 移除參考圖片\n  const removeReferenceImage = (id) => {\n    setReferenceImages(prev => prev.filter(img => img.id !== id));\n  };\n  \n  // 選擇生成的背景\n  const handleSelectGeneratedBackground = (index) => {\n    console.log('選擇背景:', index);\n    // 在實際應用中，這裡會應用選中的背景到圖片\n  };\n  \n  // 旋轉圖片\n  const handleRotate = (degrees) => {\n    console.log('旋轉圖片:', degrees);\n    // 在實際應用中，這裡會旋轉圖片\n  };\n  \n  // 翻轉圖片\n  const handleFlip = (direction) => {\n    console.log('翻轉圖片:', direction);\n    // 在實際應用中，這裡會翻轉圖片\n  };\n  \n  // 刪除圖片\n  const handleDelete = () => {\n    console.log('刪除圖片');\n    // 在實際應用中，這裡會刪除圖片\n  };\n  \n  // 下載圖片\n  const handleDownload = () => {\n    console.log('下載圖片');\n    // 在實際應用中，這裡會下載圖片\n  };\n\n  // 提供的上下文值\n  const contextValue = {\n    // 基本狀態\n    currentPage,\n    autoRemoveBackground,\n    uploadedImages,\n    selectedImages,\n    isFileMenuOpen,\n    isDownloadMenuOpen,\n    backgroundCategory,\n    searchQuery,\n    zoomLevel,\n    recommendedBackgrounds,\n    recentlyUsedBackgrounds,\n    backgroundCategories,\n    backgroundSubCategories,\n    \n    // 自定義背景頁面狀態\n    bgDesignMode,\n    prompt,\n    negativePrompt,\n    referenceImages,\n    \n    // 背景生成結果頁面狀態\n    generatedBackgrounds,\n    selectedBackground,\n    \n    // 尺寸調整頁面狀態\n    canvasWidth,\n    canvasHeight,\n    aspectRatio,\n    margin,\n    \n    // 單張編輯模式狀態\n    currentMode,\n    activeTool,\n    zoom,\n    productImageUrl,\n    bgPrompt,\n    bgNegativePrompt,\n    bgReferenceInputRef,\n    rulerStyle,\n    rulerTab,\n    rulerValue,\n    rulerUnit,\n    rulerPosition,\n    rulerText,\n    letterSpacing,\n    lineHeight,\n    generatedResults,\n    \n    // 設置函數\n    setCurrentPage,\n    setAutoRemoveBackground,\n    setUploadedImages,\n    setSelectedImages,\n    setIsFileMenuOpen,\n    setIsDownloadMenuOpen,\n    setBackgroundCategory,\n    setSearchQuery,\n    setZoomLevel,\n    setBgDesignMode,\n    setPrompt,\n    setNegativePrompt,\n    setReferenceImages,\n    setGeneratedBackgrounds,\n    setSelectedBackground,\n    setCanvasWidth,\n    setCanvasHeight,\n    setAspectRatio,\n    setMargin,\n    setCurrentMode,\n    setActiveTool,\n    setZoom,\n    setProductImageUrl,\n    setBgPrompt,\n    setBgNegativePrompt,\n    setRulerStyle,\n    setRulerTab,\n    setRulerValue,\n    setRulerUnit,\n    setRulerPosition,\n    setRulerText,\n    setLetterSpacing,\n    setLineHeight,\n    setGeneratedResults,\n    \n    // 頁面導航函數\n    enterBatchMode,\n    exitBatchMode,\n    enterCustomBgMode,\n    enterBgResultsMode,\n    enterSizeAdjustMode,\n    enterSingleEditorMode,\n    enterSingleEditorResultMode,\n    goToMainPage,\n    goBack,\n    \n    // 功能函數\n    toggleBackgroundRemoval,\n    toggleImageSelection,\n    deleteSelectedImages,\n    deleteImage,\n    handleFileUpload,\n    zoomIn,\n    zoomOut,\n    generateBackgrounds,\n    generateMoreBackgrounds,\n    applyBackgroundToImages,\n    updateCanvasSize,\n    setCanvasAspectRatio,\n    \n    // 單張編輯模式功能函數\n    handleToolClick,\n    handleZoomChange,\n    handleReferenceImageUpload,\n    removeReferenceImage,\n    handleGenerateBackground,\n    handleGenerateMoreBackgrounds,\n    handleRegenerateBackgrounds,\n    handleSelectGeneratedBackground,\n    handleRotate,\n    handleFlip,\n    handleDelete,\n    handleDownload\n  };\n\n  return (\n    <ImageContext.Provider value={contextValue}>\n      {children}\n    </ImageContext.Provider>\n  );\n};\n\nexport default ImageContext;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}